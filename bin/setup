#!/usr/bin/env sh

echo "ðŸ‘¾ Verificando composer..."
command -v composer > /dev/null 2>&1 || echo >&2 "O composer nÃ£o estÃ¡ instalado ou nÃ£o estÃ¡ no \$PATH."

echo "ðŸ‘¾ Verificando composer-asset-plugin..."
(composer global show --installed 2> /dev/null | grep "fxp/composer-asset-plugin" > /dev/null 2>&1) || (echo "NÃ£o encontrado, instalando..." && composer global require "fxp/composer-asset-plugin:~1.0")

echo "ðŸ‘¾ Instalando pacotes do composer..."
composer install -q || echo "Ocorreu um erro ao instalar os pacotes. Rode manualmente para ver o problema."

echo "ðŸ‘¾ Rodando migrations..."
php yii migrate --interactive=0 > /dev/null 2>&1 || echo "Ocorreu um erro ao rodar as migrations. Rode manualmente para ver o problema."

echo "ðŸ‘¾ Feito!"
