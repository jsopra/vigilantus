2013/11/11 07:50:15 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:40 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:40 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:40 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:40 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "tbl_migration" (
	"version" character varying (255) NOT NULL PRIMARY KEY,
	"apply_time" integer
)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:41 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:41 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:54:42 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "municipios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"sigla_estado" varchar(2) not null,
	"nome_contato" varchar not null,
	"email_contato" varchar,
	"telefone_contato" varchar not null,
	"departamento" varchar not null,
	"cargo" varchar
)
in /home/juliano/www/dengue/protected/migrations/m131111_095015_tabela_municipio.php (16)
2013/11/11 07:54:42 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "municipios" ("nome", "sigla_estado", "nome_contato", "email_contato", "telefone_contato", "departamento", "cargo") VALUES (:nome, :sigla_estado, :nome_contato, :email_contato, :telefone_contato, :departamento, :cargo)
in /home/juliano/www/dengue/protected/migrations/m131111_095015_tabela_municipio.php (26)
2013/11/11 07:54:42 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 07:55:24 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:50 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:51 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:51 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:51 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:40:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:46 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (12)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (13)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (14)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (15)
2013/11/11 12:42:47 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuarios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"login" varchar not null,
	"senha" varchar not null,
	"sal" varchar not null,
	"municipio_id" integer references municipio(id),
	"usuario_role_id" integer not null references usuario_roles(id),
	"ultimo_login" timestamp with time zone,
	"email" varchar not null,
	"token_recupera_senha" varchar,
	"data_recupera_senha" timestamp with time zone,
	"excluido" boolean not null DEFAULT false
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (30)
2013/11/11 12:42:48 [trace] [system.CModule] Loading "coreMessages" application component
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (30)
2013/11/11 12:42:48 [error] [system.db.CDbCommand] Falha ao executar CDbCommand::execute(): SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "municipio" does not exist. A declaração SQL executada foi: CREATE TABLE "usuarios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"login" varchar not null,
	"senha" varchar not null,
	"sal" varchar not null,
	"municipio_id" integer references municipio(id),
	"usuario_role_id" integer not null references usuario_roles(id),
	"ultimo_login" timestamp with time zone,
	"email" varchar not null,
	"token_recupera_senha" varchar,
	"data_recupera_senha" timestamp with time zone,
	"excluido" boolean not null DEFAULT false
).
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (30)
2013/11/11 12:42:48 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand falhou ao executar o comando SQL: SQLSTATE[42P01]: Undefined table: 7 ERROR:  relation "municipio" does not exist. The SQL statement executed was: CREATE TABLE "usuarios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"login" varchar not null,
	"senha" varchar not null,
	"sal" varchar not null,
	"municipio_id" integer references municipio(id),
	"usuario_role_id" integer not null references usuario_roles(id),
	"ultimo_login" timestamp with time zone,
	"email" varchar not null,
	"token_recupera_senha" varchar,
	"data_recupera_senha" timestamp with time zone,
	"excluido" boolean not null DEFAULT false
)' in /home/juliano/www/dengue/protected/framework/db/CDbCommand.php:354
Stack trace:
#0 /home/juliano/www/dengue/protected/framework/db/CDbCommand.php(1251): CDbCommand->execute()
#1 /home/juliano/www/dengue/protected/framework/db/CDbMigration.php(229): CDbCommand->createTable('usuarios', Array, NULL)
#2 /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php(30): CDbMigration->createTable('usuarios', Array)
#3 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(362): m131111_095524_tabela_usuario->up()
#4 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(100): MigrateCommand->migrateUp('m131111_095524_...')
#5 [internal function]: MigrateCommand->actionUp(Array)
#6 /home/juliano/www/dengue/protected/framework/console/CConsoleCommand.php(141): ReflectionMethod->invokeArgs(Object(MigrateCommand), Array)
#7 /home/juliano/www/dengue/protected/framework/console/CConsoleCommandRunner.php(65): CConsoleCommand->run(Array)
#8 /home/juliano/www/dengue/protected/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run(Array)
#9 /home/juliano/www/dengue/protected/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#10 /home/juliano/www/dengue/protected/framework/yiic.php(33): CApplication->run()
#11 /home/juliano/www/dengue/protected/yiic.php(7): require_once('/home/juliano/w...')
#12 /home/juliano/www/dengue/protected/yiic(4): require_once('/home/juliano/w...')
#13 {main}
---
2013/11/11 12:42:48 [trace] [system.CModule] Loading "errorHandler" application component
2013/11/11 12:43:01 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:01 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/11 12:43:02 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuarios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"login" varchar not null,
	"senha" varchar not null,
	"sal" varchar not null,
	"municipio_id" integer references municipios(id),
	"usuario_role_id" integer not null references usuario_roles(id),
	"ultimo_login" timestamp with time zone,
	"email" varchar not null,
	"token_recupera_senha" varchar,
	"data_recupera_senha" timestamp with time zone,
	"excluido" boolean not null DEFAULT false
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (22)
2013/11/11 12:43:02 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuarios" ("nome", "login", "senha", "sal", "usuario_role_id", "email") VALUES (:nome, :login, :senha, :sal, :usuario_role_id, :email)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (33)
2013/11/11 12:43:02 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [trace] [system.CModule] Loading "testDb" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/13 08:43:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/13 08:43:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/13 08:43:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/13 08:43:27 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/13 08:43:30 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/13 08:43:30 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
))
2013/11/13 08:43:30 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
))
2013/11/13 08:43:30 [trace] [system.CModule] Loading "coreMessages" application component
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/13 08:43:30 [error] [system.db.CDbCommand] Falha ao executar CDbCommand::execute(): SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "usuario_roles" already exists. A declaração SQL executada foi: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
).
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/13 08:43:30 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand falhou ao executar o comando SQL: SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "usuario_roles" already exists. The SQL statement executed was: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)' in /home/juliano/www/dengue/protected/framework/db/CDbCommand.php:354
Stack trace:
#0 /home/juliano/www/dengue/protected/framework/db/CDbCommand.php(1251): CDbCommand->execute()
#1 /home/juliano/www/dengue/protected/framework/db/CDbMigration.php(229): CDbCommand->createTable('usuario_roles', Array, NULL)
#2 /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php(10): CDbMigration->createTable('usuario_roles', Array)
#3 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(362): m131111_095524_tabela_usuario->up()
#4 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(100): MigrateCommand->migrateUp('m131111_095524_...')
#5 [internal function]: MigrateCommand->actionUp(Array)
#6 /home/juliano/www/dengue/protected/framework/console/CConsoleCommand.php(141): ReflectionMethod->invokeArgs(Object(MigrateCommand), Array)
#7 /home/juliano/www/dengue/protected/framework/console/CConsoleCommandRunner.php(65): CConsoleCommand->run(Array)
#8 /home/juliano/www/dengue/protected/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run(Array)
#9 /home/juliano/www/dengue/protected/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#10 /home/juliano/www/dengue/protected/framework/yiic.php(33): CApplication->run()
#11 /home/juliano/www/dengue/protected/yiic.php(7): require_once('/home/juliano/w...')
#12 /home/juliano/www/dengue/protected/yiic(4): require_once('/home/juliano/w...')
#13 {main}
---
2013/11/13 08:43:30 [trace] [system.CModule] Loading "errorHandler" application component
2013/11/13 08:43:40 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [trace] [system.CModule] Loading "testDb" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/13 08:43:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/13 08:43:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/13 08:43:40 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/13 08:43:40 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/13 08:43:41 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuarios" ("nome", "login", "senha", "sal", "usuario_role_id", "email") VALUES (:nome, :login, :senha, :sal, :usuario_role_id, :email)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (17)
2013/11/13 08:43:41 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(INSERT INTO "usuarios" ("nome", "login", "senha", "sal", "usuario_role_id", "email") VALUES (:nome, :login, :senha, :sal, :usuario_role_id, :email))
2013/11/13 08:43:41 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(INSERT INTO "usuarios" ("nome", "login", "senha", "sal", "usuario_role_id", "email") VALUES (:nome, :login, :senha, :sal, :usuario_role_id, :email))
2013/11/13 08:43:41 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/13 08:43:41 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time))
2013/11/13 08:43:41 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time))
2013/11/14 00:44:22 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:42 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:42 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:42 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:42 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:42 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:43 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:43 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "bairro_tipo" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone not null default,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 00:48:43 [trace] [system.CModule] Loading "coreMessages" application component
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 00:48:43 [error] [system.db.CDbCommand] Falha ao executar CDbCommand::execute(): SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ","
LINE 6: ...data_atualizacao" timestamp with time zone not null default,
                                                                      ^. A declaração SQL executada foi: CREATE TABLE "bairro_tipo" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone not null default,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
).
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 00:48:43 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand falhou ao executar o comando SQL: SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near ","
LINE 6: ...data_atualizacao" timestamp with time zone not null default,
                                                                      ^. The SQL statement executed was: CREATE TABLE "bairro_tipo" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone not null default,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)' in /home/juliano/www/dengue/protected/framework/db/CDbCommand.php:354
Stack trace:
#0 /home/juliano/www/dengue/protected/framework/db/CDbCommand.php(1251): CDbCommand->execute()
#1 /home/juliano/www/dengue/protected/framework/db/CDbMigration.php(229): CDbCommand->createTable('bairro_tipo', Array, NULL)
#2 /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php(15): CDbMigration->createTable('bairro_tipo', Array)
#3 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(362): m131114_024422_tabela_tipo_bairro->up()
#4 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(100): MigrateCommand->migrateUp('m131114_024422_...')
#5 [internal function]: MigrateCommand->actionUp(Array)
#6 /home/juliano/www/dengue/protected/framework/console/CConsoleCommand.php(141): ReflectionMethod->invokeArgs(Object(MigrateCommand), Array)
#7 /home/juliano/www/dengue/protected/framework/console/CConsoleCommandRunner.php(65): CConsoleCommand->run(Array)
#8 /home/juliano/www/dengue/protected/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run(Array)
#9 /home/juliano/www/dengue/protected/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#10 /home/juliano/www/dengue/protected/framework/yiic.php(33): CApplication->run()
#11 /home/juliano/www/dengue/protected/yiic.php(7): require_once('/home/juliano/w...')
#12 /home/juliano/www/dengue/protected/yiic(4): require_once('/home/juliano/w...')
#13 {main}
---
2013/11/14 00:48:43 [trace] [system.CModule] Loading "errorHandler" application component
2013/11/14 00:48:54 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:48:54 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "bairro_tipo" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone not null,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 00:48:55 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipo" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/14 00:48:55 [trace] [system.CModule] Loading "coreMessages" application component
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/14 00:48:55 [error] [system.db.CDbCommand] Falha ao executar CDbCommand::execute(): SQLSTATE[23502]: Not null violation: 7 ERROR:  null value in column "data_atualizacao" violates not-null constraint. A declaração SQL executada foi: INSERT INTO "bairro_tipo" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por).
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/14 00:48:55 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand falhou ao executar o comando SQL: SQLSTATE[23502]: Not null violation: 7 ERROR:  null value in column "data_atualizacao" violates not-null constraint. The SQL statement executed was: INSERT INTO "bairro_tipo" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)' in /home/juliano/www/dengue/protected/framework/db/CDbCommand.php:354
Stack trace:
#0 /home/juliano/www/dengue/protected/framework/db/CDbCommand.php(1178): CDbCommand->execute(Array)
#1 /home/juliano/www/dengue/protected/framework/db/CDbMigration.php(174): CDbCommand->insert('bairro_tipo', Array)
#2 /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php(21): CDbMigration->insert('bairro_tipo', Array)
#3 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(362): m131114_024422_tabela_tipo_bairro->up()
#4 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(100): MigrateCommand->migrateUp('m131114_024422_...')
#5 [internal function]: MigrateCommand->actionUp(Array)
#6 /home/juliano/www/dengue/protected/framework/console/CConsoleCommand.php(141): ReflectionMethod->invokeArgs(Object(MigrateCommand), Array)
#7 /home/juliano/www/dengue/protected/framework/console/CConsoleCommandRunner.php(65): CConsoleCommand->run(Array)
#8 /home/juliano/www/dengue/protected/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run(Array)
#9 /home/juliano/www/dengue/protected/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#10 /home/juliano/www/dengue/protected/framework/yiic.php(33): CApplication->run()
#11 /home/juliano/www/dengue/protected/yiic.php(7): require_once('/home/juliano/w...')
#12 /home/juliano/www/dengue/protected/yiic(4): require_once('/home/juliano/w...')
#13 {main}
---
2013/11/14 00:48:55 [trace] [system.CModule] Loading "errorHandler" application component
2013/11/14 00:50:12 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:12 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/14 00:50:12 [trace] [system.CModule] Loading "coreMessages" application component
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/14 00:50:12 [error] [system.db.CDbCommand] Falha ao executar CDbCommand::execute(): SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "usuario_roles" already exists. A declaração SQL executada foi: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
).
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/14 00:50:12 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand falhou ao executar o comando SQL: SQLSTATE[42P07]: Duplicate table: 7 ERROR:  relation "usuario_roles" already exists. The SQL statement executed was: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)' in /home/juliano/www/dengue/protected/framework/db/CDbCommand.php:354
Stack trace:
#0 /home/juliano/www/dengue/protected/framework/db/CDbCommand.php(1251): CDbCommand->execute()
#1 /home/juliano/www/dengue/protected/framework/db/CDbMigration.php(229): CDbCommand->createTable('usuario_roles', Array, NULL)
#2 /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php(10): CDbMigration->createTable('usuario_roles', Array)
#3 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(362): m131111_095524_tabela_usuario->up()
#4 /home/juliano/www/dengue/protected/framework/cli/commands/MigrateCommand.php(100): MigrateCommand->migrateUp('m131111_095524_...')
#5 [internal function]: MigrateCommand->actionUp(Array)
#6 /home/juliano/www/dengue/protected/framework/console/CConsoleCommand.php(141): ReflectionMethod->invokeArgs(Object(MigrateCommand), Array)
#7 /home/juliano/www/dengue/protected/framework/console/CConsoleCommandRunner.php(65): CConsoleCommand->run(Array)
#8 /home/juliano/www/dengue/protected/framework/console/CConsoleApplication.php(91): CConsoleCommandRunner->run(Array)
#9 /home/juliano/www/dengue/protected/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#10 /home/juliano/www/dengue/protected/framework/yiic.php(33): CApplication->run()
#11 /home/juliano/www/dengue/protected/yiic.php(7): require_once('/home/juliano/w...')
#12 /home/juliano/www/dengue/protected/yiic(4): require_once('/home/juliano/w...')
#13 {main}
---
2013/11/14 00:50:12 [trace] [system.CModule] Loading "errorHandler" application component
2013/11/14 00:50:52 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:52 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 00:50:54 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "bairro_tipo" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer  not null references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 00:50:54 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipo" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/14 00:50:54 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipo" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (27)
2013/11/14 00:50:54 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.CModule] Loading "db" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "tbl_migration" (
	"version" character varying (255) NOT NULL PRIMARY KEY,
	"apply_time" integer
)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:27 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:28 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "municipios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"sigla_estado" varchar(2) not null,
	"nome_contato" varchar not null,
	"email_contato" varchar,
	"telefone_contato" varchar not null,
	"departamento" varchar not null,
	"cargo" varchar
)
in /home/juliano/www/dengue/protected/migrations/m131111_095015_tabela_municipio.php (16)
2013/11/14 21:54:28 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "municipios" ("nome", "sigla_estado", "nome_contato", "email_contato", "telefone_contato", "departamento", "cargo") VALUES (:nome, :sigla_estado, :nome_contato, :email_contato, :telefone_contato, :departamento, :cargo)
in /home/juliano/www/dengue/protected/migrations/m131111_095015_tabela_municipio.php (26)
2013/11/14 21:54:28 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuario_roles" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (10)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (12)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (13)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (14)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuario_roles" ("nome") VALUES (:nome)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (15)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "usuarios" (
	"id" serial NOT NULL PRIMARY KEY,
	"nome" varchar not null,
	"login" varchar not null,
	"senha" varchar not null,
	"sal" varchar not null,
	"municipio_id" integer references municipios(id),
	"usuario_role_id" integer not null references usuario_roles(id),
	"ultimo_login" timestamp with time zone,
	"email" varchar not null,
	"token_recupera_senha" varchar,
	"data_recupera_senha" timestamp with time zone,
	"excluido" boolean not null DEFAULT false
)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (30)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "usuarios" ("nome", "login", "senha", "sal", "usuario_role_id", "email") VALUES (:nome, :login, :senha, :sal, :usuario_role_id, :email)
in /home/juliano/www/dengue/protected/migrations/m131111_095524_tabela_usuario.php (41)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "bairro_tipos" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer  not null references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (27)
2013/11/14 21:54:29 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [trace] [system.CModule] Loading "log" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [trace] [system.CModule] Loading "testDb" application component
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [trace] [system.db.CDbConnection] Opening DB connection
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [trace] [system.db.CDbCommand] Querying SQL: SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT a.attname, LOWER(format_type(a.atttypid, a.atttypmod)) AS type, d.adsrc, a.attnotnull, a.atthasdef
FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attnum > 0 AND NOT a.attisdropped
	AND a.attrelid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
		AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = :schema))
ORDER BY a.attnum)
2013/11/16 09:01:16 [trace] [system.db.CDbCommand] Querying SQL: SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema))
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT conname, consrc, contype, indkey FROM (
	SELECT
		conname,
		CASE WHEN contype='f' THEN
			pg_catalog.pg_get_constraintdef(oid)
		ELSE
			'CHECK (' || consrc || ')'
		END AS consrc,
		contype,
		conrelid AS relid,
		NULL AS indkey
	FROM
		pg_catalog.pg_constraint
	WHERE
		contype IN ('f', 'c')
	UNION ALL
	SELECT
		pc.relname,
		NULL,
		CASE WHEN indisprimary THEN
				'p'
		ELSE
				'u'
		END,
		pi.indrelid,
		indkey
	FROM
		pg_catalog.pg_class pc,
		pg_catalog.pg_index pi
	WHERE
		pc.oid=pi.indexrelid
		AND EXISTS (
			SELECT 1 FROM pg_catalog.pg_depend d JOIN pg_catalog.pg_constraint c
			ON (d.refclassid = c.tableoid AND d.refobjid = c.oid)
			WHERE d.classid = pc.tableoid AND d.objid = pc.oid AND d.deptype = 'i' AND c.contype IN ('u', 'p')
	)
) AS sub
WHERE relid = (SELECT oid FROM pg_catalog.pg_class WHERE relname=:table
	AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace
	WHERE nspname=:schema)))
2013/11/16 09:01:16 [trace] [system.db.CDbCommand] Querying SQL: SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT attnum, attname FROM pg_catalog.pg_attribute WHERE
	attrelid=(
		SELECT oid FROM pg_catalog.pg_class WHERE relname=:table AND relnamespace=(
			SELECT oid FROM pg_catalog.pg_namespace WHERE nspname=:schema
		)
	)
    AND attnum IN (1))
2013/11/16 09:01:16 [trace] [system.db.CDbCommand] Querying SQL: SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] begin:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/16 09:01:16 [profile] [system.db.CDbCommand.query] end:system.db.CDbCommand.query(SELECT "version", "apply_time"
FROM "tbl_migration"
ORDER BY "version" DESC)
2013/11/16 09:01:17 [trace] [system.db.CDbCommand] Executing SQL: CREATE TABLE "bairro_tipos" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer  not null references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (15)
2013/11/16 09:01:17 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(CREATE TABLE "bairro_tipos" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer  not null references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
))
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(CREATE TABLE "bairro_tipos" (
	"id" serial NOT NULL PRIMARY KEY,
	"municipio_id" integer  not null references municipios(id),
	"nome" varchar not null,
	"data_cadastro" timestamp with time zone not null default now(),
	"data_atualizacao" timestamp with time zone,
	"inserido_por" integer not null references usuarios(id),
	"atualizado_por" integer references usuarios(id)
))
2013/11/16 09:01:18 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (21)
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por))
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por))
2013/11/16 09:01:18 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por)
in /home/juliano/www/dengue/protected/migrations/m131114_024422_tabela_tipo_bairro.php (27)
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por))
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(INSERT INTO "bairro_tipos" ("municipio_id", "nome", "inserido_por") VALUES (:municipio_id, :nome, :inserido_por))
2013/11/16 09:01:18 [trace] [system.db.CDbCommand] Executing SQL: INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time)
in /home/juliano/www/dengue/protected/yiic.php (7)
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] begin:system.db.CDbCommand.execute(INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time))
2013/11/16 09:01:18 [profile] [system.db.CDbCommand.execute] end:system.db.CDbCommand.execute(INSERT INTO "tbl_migration" ("version", "apply_time") VALUES (:version, :apply_time))
