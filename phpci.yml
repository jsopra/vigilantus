build_settings:
    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo
    ignore:
        - "vendor"
        - "tests"
    pgsql:
        host: "${DB_HOST}"
        user: "${DB_USERNAME}"
        pass: "${DB_PASSWORD}"

setup:
    pgsql:
        - "DROP DATABASE IF EXISTS vigilantus_test;"
        - "CREATE DATABASE vigilantus_test;"
    shell:
        - "cd %BUILD_PATH% && cp .env.example .env"
    composer:
        action: "install"

test:
    codeception:
        config: "tests/codeception.yml"
        path: "tests/codeception/_output/"
    php_mess_detector:
        allow_failures: true
    php_code_sniffer:
        standard: "PSR2"
    php_cpd:
        allow_failures: true
