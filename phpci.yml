build_settings:
    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo
    ignore:
        - "vendor"
        - "tests"
    pgsql:
        host: "localhost"
        user: "postgres"
        pass: "postgres"

setup:
    pgsql:
        - "DROP DATABASE IF EXISTS vigilantus_test;"
        - "CREATE DATABASE vigilantus_test;"
    composer:
        action: "install"
    env:
        ENVIRONMENT: "development"
        VIGILANTUS_DB_DSN: "pgsql:host=localhost;dbname=vigilantus_development"
        VIGILANTUS_DB_DSN_HOST: "pgsql:host=localhost"
        VIGILANTUS_DB_DSN_DBNAME: "dbname=vigilantus_development"
        VIGILANTUS_DB_DSN: "pgsql:host=localhost;dbname=vigilantus_development"
        VIGILANTUS_DB_USERNAME: "postgres"
        VIGILANTUS_DB_PASSWORD: "postgres"
        VIGILANTUS_TEST_DB_DSN_HOST: "pgsql:host=localhost"
        VIGILANTUS_TEST_DB_DSN_DBNAME: "dbname=vigilantus_test"
        VIGILANTUS_TEST_DB_USERNAME: "postgres"
        VIGILANTUS_TEST_DB_PASSWORD: "postgres"
        VIGILANTUS_REDIS_HOST: "localhost"
        VIGILANTUS_REDIS_DB_PORT: "6379"
        VIGILANTUS_REDIS_DB_PASSWORD: ""
        VIGILANTUS_REDIS_DB_NUMBER: "0"

test:
    codeception:
        config: "tests/codeception.yml"
        path: "tests/codeception/_output/"
    php_mess_detector:
        allow_failures: true
    php_code_sniffer:
        standard: "PSR2"
    php_cpd:
        allow_failures: true